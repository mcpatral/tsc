parameters:
  - name: namespace
    displayName: Namespace to enable/disable Open Service Mesh
    type: string
  - name: action
    displayName: Action to do with Open Service Mesh for Namespace
    default: add
    values:
      - add
      - remove
  - name: args
    displayName: Additional arguments for OSM command
    type: string
    default: ""
  - name: workingDirectory
    displayName: Azure CLI working directory
    type: string

steps:
  - task: Bash@3
    displayName: Namespace ${{ parameters.namespace }} ${{ parameters.action }} into OSM
    inputs:
      targetType: 'inline'
      workingDirectory: ${{ parameters.workingDirectory }}
      script: |
        osm namespace ${{ parameters.action }} ${{ parameters.namespace }} ${{ parameters.args }}